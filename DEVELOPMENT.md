# Billu Knows Best - Development Guide

## Overview
Billu Knows Best is a browser extension featuring a 2D animated black cat ("Billu") that delivers AI-powered, context-aware motivational nudges. The extension uses Azure OpenAI GPT-4o to generate personalized messages based on the current webpage content.

## Features

### Core Functionality
- **2D Animated Cat**: Well-proportioned black cat with proper limbs, tail, and facial features
- **AI-Powered Nudges**: Context-aware messages generated by GPT-4o based on page content
- **Productivity Tracking**: Tracks browsing time and displays stats on custom new tab page
- **Smart Timing**: Avoids interrupting when user is typing or page is hidden

### AI Integration
- **Azure OpenAI GPT-4o**: Uses Azure OpenAI service for dynamic message generation
- **Context Extraction**: Analyzes webpage title, URL, metadata, category, and time spent
- **Personalized Prompts**: Tailors messages based on website category (work, social, entertainment, etc.)
- **Fallback Messages**: Provides backup messages if API is unavailable

## File Structure

```
├── manifest.json          # Extension configuration
├── content.js            # Main content script with AI integration
├── content.css           # Cat animation and styling
├── background.js         # Service worker for time tracking
├── newtab.html          # Custom new tab page
├── newtab.js            # New tab page functionality
├── newtab.css           # New tab page styling
├── popup.html           # Extension popup
├── popup.js             # Popup functionality
├── popup.css            # Popup styling
├── test-page.html       # Test page for development
└── icons/               # Extension icons
```

## Testing Instructions

### 1. Load Extension
1. Open Edge browser
2. Navigate to `edge://extensions/`
3. Enable "Developer mode"
4. Click "Load unpacked"
5. Select the extension folder

### 2. Test Basic Functionality
1. Open `test-page.html` in browser
2. Wait 3 seconds for Billu to appear
3. Observe loading state ("🐾 Thinking...")
4. Wait for AI-generated message
5. Double-click Billu to hide

### 3. Test Edge Cases
- **Typing Prevention**: Type in input field - Billu shouldn't appear
- **Hidden Page**: Switch tabs - Billu shouldn't appear on hidden pages
- **API Failure**: Block network requests to test fallback messages
- **Different Sites**: Test on various websites (work, social, news, etc.)

## API Configuration

The extension uses Azure OpenAI GPT-4o. Configuration is in `content.js`:

```javascript
this.azureConfig = {
    endpoint: "https://skillupai-avalluri.openai.azure.com/",
    apiKey: "YOUR_API_KEY_HERE",
    deployment: "gpt-4o",
    apiVersion: "2024-12-01-preview"
};
```

## Development Tips

### Debugging
- Open browser console to see logs
- Check `chrome://extensions/` for error messages
- Use `console.log()` statements for debugging

### Message Timing
- Initial appearance: 3 seconds after page load
- Periodic nudges: 5-10 minute intervals
- Scroll-based: After 30 seconds of scrolling (if 5+ minutes since last nudge)

### CSS Modifications
- Cat styling is in `content.css`
- Speech bubble positioning can be adjusted in `.speech-bubble` class
- Animation timing in `@keyframes` sections

### Content Script Updates
- `BilluAIAssistant` class handles all functionality
- `extractPageData()` gathers page metadata
- `generateAINudge()` calls Azure OpenAI API
- `showBillu()` manages display logic

## Troubleshooting

### Common Issues
1. **Billu doesn't appear**: Check console for errors, verify API key
2. **Loading state stuck**: API might be unreachable, check network tab
3. **Wrong positioning**: Adjust CSS `.speech-bubble` positioning
4. **Performance issues**: Reduce nudge frequency in `setupPeriodicNudges()`

### API Issues
- Verify Azure OpenAI endpoint and API key
- Check API quota and usage limits
- Ensure deployment name matches configuration

## Future Enhancements
- Add more sophisticated metadata extraction
- Implement user preferences for nudge frequency
- Add more cat animations and interactions
- Expand website categorization
- Add user feedback mechanism for message quality
